<!doctype html><html data-theme=auto lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="Writing down my learning process. Probably mainly Rust, and Java..." name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#9d4edd name=theme-color><meta content=#c77dff media=(prefers-color-scheme:dark) name=theme-color><title>HTTP Request Without FW - azmablog</title><link href=https://blog.azmarach.work/posts/http-request-without-fw/ rel=canonical><link href=https://blog.azmarach.work/favicon.png rel=icon type=image/png><link href=https://blog.azmarach.work/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='-.07em' y='.89em' font-size='90'%3E🦀%3C/text%3E%3C/svg%3E" rel=icon><link title="azmablog - Atom Feed" href=https://blog.azmarach.work/atom.xml rel=alternate type=application/atom+xml><style>:root{--accent-color:#9d4edd}[data-theme=dark]{--accent-color:#c77dff}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--accent-color:#c77dff}}</style><link href=https://blog.azmarach.work/style.css rel=stylesheet><link href=https://blog.azmarach.work/icons.css rel=stylesheet><link href=https://blog.azmarach.work/custom.css rel=stylesheet><script defer src=https://blog.azmarach.work/closable.js></script><script defer src=https://blog.azmarach.work/copy-button.js></script><script defer src=https://blog.azmarach.work/theme-switcher.js></script><meta content=azmablog property=og:site_name><meta content="HTTP Request Without FW - azmablog" property=og:title><meta content=https://blog.azmarach.work/posts/http-request-without-fw/ property=og:url><meta content="One of my previous blog articles on basic Java" property=og:description><meta content=https://blog.azmarach.work/processed_images/http.c55ed9dc098fa34b.jpg property=og:image><meta content=en_US property=og:locale><body><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li><a href=https://azmarach.work>🌐 ← Back to main site</a><li id=home><a href=https://blog.azmarach.work> <i class=icon></i>azmablog</a><li class=divider><li><a href=https://blog.azmarach.work/posts>Posts</a><li><a href=https://blog.azmarach.work/code>Code</a><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details></ul></nav></header><main id=main-content><article><div id=banner-container><img class=full-bleed id=banner src=https://blog.azmarach.work/posts/http-request-without-fw/http.jpg></div><div id=heading><p><small> <time datetime=" 2024-02-27T00:00:00+00:00">Published on February 27, 2024</time></small><h1>HTTP Request Without FW</h1><p><small><span>4 minutes read</span><span> • </span></small><ul class=tags><a class=tag href=https://blog.azmarach.work/tags>tags:</a><li><a class=tag href=https://blog.azmarach.work/tags/java/>java</a><li><a class=tag href=https://blog.azmarach.work/tags/archive/>archive</a><li><a class=tag href=https://blog.azmarach.work/tags/http/>http</a></ul><br></div><div id=buttons-container><details class=closable id=toc><summary title="Table of Contents"><i class=icon></i></summary> <div><strong class=title>Table of Contents</strong><div><ul><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#what-does-a-bare-bones-http-request-in-java-look-like>What does a bare-bones HTTP request in Java look like?</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#the-main-part-of-the-program-looked-like-this>The main part of the program looked like this</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#httpclient>HttpClient</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#there-is-no-json-parser-neo>There is no JSON parser, Neo…</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#regex>Regex</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#tip-to-wrap-up>Tip to wrap up</a></ul></div></div></details><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a></div><h2>Table of Contents</h2><ul><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#what-does-a-bare-bones-http-request-in-java-look-like>What does a bare-bones HTTP request in Java look like?</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#the-main-part-of-the-program-looked-like-this>The main part of the program looked like this</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#httpclient>HttpClient</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#there-is-no-json-parser-neo>There is no JSON parser, Neo…</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#regex>Regex</a><li><a href=https://blog.azmarach.work/posts/http-request-without-fw/#tip-to-wrap-up>Tip to wrap up</a></ul><p>As part of learning the basics, I was exploring Java’s core libraries and thought I’d try writing a minimal HTTP request. Lately, I’ve been enjoying digging into the fundamentals — I want to better understand what we skipped during my retraining in favor of getting things working as quickly as possible.<p>During the retraining, we jumped straight into Spring Boot before really knowing what was going on. Sure, we got some explanation, but even after hearing the difference between Spring and Spring Boot, it didn’t really click for me back then — let alone understanding what’s happening under the hood.<p>That’s why I’m trying to write and build as much as possible directly in the terminal. And to figure out how to do the most with the least.<hr><h3 id=what-does-a-bare-bones-http-request-in-java-look-like>What does a bare-bones HTTP request in Java look like?</h3><p>I only needed the <a rel="noopener nofollow noreferrer" href=https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/package-summary.html target=_blank>java.net</a> package. The only tricky part at the end was parsing JSON and extracting just the relevant part of the response body — because there’s no JSON parser in the core libraries. (Or at least, I didn’t find one.) But what <em>is</em> there? The good old regex matcher — and that did the job.<p>I started by importing what I needed. As I said, I’m writing in Vim with no plugins or LSP. Nothing auto-completes for me. It’s good practice — and in this case, not even that hard. To send an HTTP request and receive a response, I only need four imports from <code>java.net</code>.<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#b48ead>import </span><span>java.net.</span><span style=color:#ebcb8b>URI</span><span>;                    </span><span style=color:#65737e>// Uniform Resource Identifier object — needed to identify a web resource
</span><span style=color:#b48ead>import </span><span>java.net.http.</span><span style=color:#ebcb8b>HttpClient</span><span>;        </span><span style=color:#65737e>// client to send the request and receive the response
</span><span style=color:#b48ead>import </span><span>java.net.http.</span><span style=color:#ebcb8b>HttpRequest</span><span>;       </span><span style=color:#65737e>// objects for the request and response
</span><span style=color:#b48ead>import </span><span>java.net.http.</span><span style=color:#ebcb8b>HttpResponse</span><span>;
</span></code></pre><hr><h3 id=the-main-part-of-the-program-looked-like-this>The main part of the program looked like this</h3><p>I defined the client and request and picked one of the many open APIs available online. This endpoint returns a random activity each time you call it — something to do when you’re bored: <code>www.boredapi.com/api/activity</code>.<p>Then I declared the response object, and inside a <code>try</code> block, sent the request. 🙂<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#ebcb8b>HttpClient</span><span> httpClient = </span><span style=color:#ebcb8b>HttpClient</span><span>.</span><span style=color:#bf616a>newHttpClient</span><span>();
</span><span>        
</span><span style=color:#ebcb8b>HttpRequest</span><span> request = </span><span style=color:#ebcb8b>HttpRequest</span><span>.</span><span style=color:#bf616a>newBuilder</span><span>()
</span><span>        .</span><span style=color:#bf616a>uri</span><span>(</span><span style=color:#ebcb8b>URI</span><span>.</span><span style=color:#bf616a>create</span><span>("</span><span style=color:#a3be8c>https://www.boredapi.com/api/activity</span><span>"))
</span><span>        .</span><span style=color:#bf616a>GET</span><span>()
</span><span>        .</span><span style=color:#bf616a>build</span><span>();
</span><span>
</span><span style=color:#ebcb8b>HttpResponse</span><span>&lt;</span><span style=color:#ebcb8b>String</span><span>> response = </span><span style=color:#d08770>null</span><span>;
</span><span>
</span><span style=color:#b48ead>try </span><span>{
</span><span>    response = httpClient.</span><span style=color:#bf616a>send</span><span>(request, </span><span style=color:#ebcb8b>HttpResponse</span><span>.</span><span style=color:#ebcb8b>BodyHandlers</span><span>.</span><span style=color:#bf616a>ofString</span><span>());
</span><span>
</span><span>    </span><span style=color:#ebcb8b>System</span><span>.out.</span><span style=color:#bf616a>println</span><span>("</span><span style=color:#a3be8c>Response Code: </span><span>" + response.</span><span style=color:#bf616a>statusCode</span><span>());
</span><span>    </span><span style=color:#ebcb8b>System</span><span>.out.</span><span style=color:#bf616a>println</span><span>("</span><span style=color:#a3be8c>Response Body: </span><span>" + response.</span><span style=color:#bf616a>body</span><span>());
</span><span>} </span><span style=color:#b48ead>catch </span><span>(</span><span style=color:#ebcb8b>Exception </span><span style=color:#bf616a>e</span><span>) {
</span><span>    e.</span><span style=color:#bf616a>printStackTrace</span><span>();
</span><span>}
</span></code></pre><hr><h3 id=httpclient>HttpClient</h3><p><code>HttpClient</code> lets you send either a synchronous or an asynchronous request — see the <a rel="noopener nofollow noreferrer" href=https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html target=_blank>documentation</a>. I chose the synchronous one, which means the program pauses until it receives a response (or times out — you can define a timeout too).<p>I got my response, and since I printed it right away along with the status code, here’s what it looked like:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>Response Code: 200
</span><span>Response Body: {"activity":"Donate to your local food bank","type":"charity","participants":1,"price":0.5,"link":"","key":"4150284","accessibility":0.8}
</span></code></pre><p>A noble activity, right? As you can see, the response contains more than just the activity — there’s also the type, number of participants, cost, etc.<hr><h3 id=there-is-no-json-parser-neo>There is no JSON parser, Neo…</h3><p>I was only interested in the activity itself, and I realized there wasn’t an easy way to extract it from the raw string. Sure, I could’ve messed around with substrings, but that felt clumsy — and what if the response format changes next time? I didn’t like that idea. I couldn’t think of a clean solution at first.<p>So I looked through the core libraries again and found these two useful imports:<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#b48ead>import </span><span>java.util.regex.</span><span style=color:#ebcb8b>Matcher</span><span>;
</span><span style=color:#b48ead>import </span><span>java.util.regex.</span><span style=color:#ebcb8b>Pattern</span><span>;
</span></code></pre><hr><h3 id=regex>Regex</h3><p>Regex still feels like advanced wizardry to me, but I know the basics. Here’s the pattern I used: <code>"activity"\\s*:\\s*"(.*?)"</code>.<ol><li>Match the exact <code>"activity"</code> string, including quotes.<li>Then zero or more spaces <code>\s*</code>.<li>Followed by a colon <code>:</code>.<li>And again, zero or more spaces <code>\s*</code>.<li>Then the opening quote of the value I want <code>"</code>.<li>Followed by any number of characters — but as few as possible — <code>(.*?)</code>, grouped.<li>And finally, the closing quote <code>"</code>.</ol><p>When properly escaped in Java, the code looks like this:<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#ebcb8b>Pattern</span><span> treasurePattern = </span><span style=color:#ebcb8b>Pattern</span><span>.</span><span style=color:#bf616a>compile</span><span>("</span><span style=color:#96b5b4>\"</span><span style=color:#a3be8c>activity</span><span style=color:#96b5b4>\"\\</span><span style=color:#a3be8c>s*:</span><span style=color:#96b5b4>\\</span><span style=color:#a3be8c>s*</span><span style=color:#96b5b4>\"</span><span style=color:#a3be8c>(.*?)</span><span style=color:#96b5b4>\"</span><span>");
</span></code></pre><p>Then I passed it to the matcher:<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#ebcb8b>Matcher</span><span> matcher = treasurePattern.</span><span style=color:#bf616a>matcher</span><span>(response.</span><span style=color:#bf616a>body</span><span>());
</span><span>
</span><span style=color:#b48ead>while </span><span>(matcher.</span><span style=color:#bf616a>find</span><span>()) {
</span><span>    </span><span style=color:#ebcb8b>String</span><span> value = matcher.</span><span style=color:#bf616a>group</span><span>(</span><span style=color:#d08770>1</span><span>);
</span><span>    </span><span style=color:#ebcb8b>System</span><span>.out.</span><span style=color:#bf616a>println</span><span>("</span><span style=color:#a3be8c>Activity  = </span><span>" + value);
</span><span>}
</span></code></pre><p>And the result:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>Activity  = Donate to your local food bank
</span></code></pre><hr><h2 id=tip-to-wrap-up>Tip to wrap up</h2><p>I compiled the program in the terminal — either the classic way with the JDK compiler: <code>javac &lt;class name>.java</code> or directly from Vim with <code>:make %</code>.<p>I ran it with: <code>java &lt;class name></code><p>If you want the program to be a bit more talkative and see what’s going on behind the scenes, try: <code>java -verbose &lt;class name></code><p>A follow-up Randori post is <a href=/posts/asynchronous-http-request>Asynchronous HTTP Request</a>.</article><hr><nav id=post-nav><a class="post-nav-item post-nav-next" href=https://blog.azmarach.work/posts/asynchronous-http-request/> <div class=nav-arrow>Next</div> <span class=post-title>Asynchronous HTTP Request</span> </a></nav></main><footer id=site-footer><p>© azmablog, 2025<p><small>Powered by <a class="link external" rel="noopener nofollow noreferrer" href=https://www.getzola.org>Zola</a> and <a class="link external" rel="noopener nofollow noreferrer" href=https://duckquill.daudix.one>Duckquill</a> </small></footer><span class=hidden id=copy-code-text>Copy Code</span><style>:root{--alert-note-text:"Note";--alert-tip-text:"Tip";--alert-important-text:"Important";--alert-warning-text:"Warning";--alert-caution-text:"Caution"}</style>